\chapter{Implenentation}

The project is separated in two main components - the filter wrapper library and the user interface library.
Wrappers handle the application and parameters of each filter instance, while the UI handles the display
and interaction functionalities.

\section{Filter Wrapper Library}

Based on OpenCV \verb|cv::Mat|, the library provides the means for applying a given filter on the input frame,
as well as a possibility to tweak the filters inherent parameters. The amount of filters supported can be
extended indefinitely, due to the use of a purely virtual abstract class, the \verb|GenericFilterWrapper| class.

\begin{minipage}{\textwidth}
\begin{lstlisting}[caption={Generic wrapper class definition}, label=code:GenericFilterWrapper]
class GenericFilterWrapper {
    public:
        virtual void applyFilter(cv::Mat &inframe) = 0;
        virtual std::vector<parameterConfig> allParameterConfigs() = 0;
        virtual const char *filterName() = 0;
        virtual const char *filterDescription() = 0;
};
\end{lstlisting}
\end{minipage}

As seen in listing \ref{code:GenericFilterWrapper}, the abstract class provides access to the function 
applying the filter, as well as all details that can be shown in the user interface. For this reason, 
the filter library can be used by any high-level graphical interface library, as long as a valid 
\verb|cv::Mat| is provided. Initial prototypes were realized using the OpenCV HighUI library, and later 
ported to the Qt Framework for the final product.

The class also provides access to a list of parameter configurations, that can be used in the user
interface to set up various tool-tips and interactive sliders.

\begin{minipage}{\textwidth}
\begin{lstlisting}[caption={Parameter configuration structure}, label=code:parameterConfig]
typedef struct _parameterConfig {
    const char* name;
    const char* description;
    int currentValue;
    int minValue;
    int maxValue;
    int step;
    std::function<void(int)>setter;
} parameterConfig;
\end{lstlisting}
\end{minipage}

Listing \ref{code:parameterConfig} presents the structure that is used to provide access to a parameter
configuration. The setter function is defined for each filter parameter individually, resulting in an
additional abstraction layer.

Because internal functionality is handled by each wrapper, without exposing any of it to the end
user - usually, the graphical interface - the filter library can be extended indefinitely, as long as
the limitations imposed by the constructs defined in \ref{code:GenericFilterWrapper} and 
\ref{code:parameterConfig} are adhered to.

\subsection{Empty Filter}

As the name implies, the empty filter does not affect the input frame in any way. Its purpose is to be
used as a reference point, both when visualizing other filters, or when measuring filter delay.

\subsection{Box Filter}
\subsection{Median Filter}
\subsection{Gaussian Filter}

Gaussian blur refference - \cite{gaussian}

\subsection{Bilateral Correction}
\subsection{Erode Filter}
\subsection{Dilate Filter}
\subsection{Sobbel Filter}
\subsection{Canny Filter}
\subsection{Emboss Filter}
\subsection{Lens Distortion}

\section{User Interface}

\subsection{Layer system}

\subsection{Signals and Slots}

\subsection{Control pannel}












